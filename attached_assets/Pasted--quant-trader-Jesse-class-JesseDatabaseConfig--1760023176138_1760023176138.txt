# quant-trader
# ==================== Jesseæ•°æ®åº“é…ç½®æ•´åˆ ====================
class JesseDatabaseConfig:
    """Jesseäº¤æ˜“æ¡†æ¶æ•°æ®åº“é…ç½®"""
    
    # Jesseæ”¯æŒçš„5ä¸ªä¸»è¦æ•°æ®åº“URLé…ç½®
    DATABASE_URLS = {
        'sqlite': {
            'default': 'sqlite:///jesse.db',
            'trades': 'sqlite:///jesse_trades.db',
            'candles': 'sqlite:///jesse_candles.db',
            'logs': 'sqlite:///jesse_logs.db',
            'metrics': 'sqlite:///jesse_metrics.db'
        },
        'postgresql': {
            'default': 'postgresql://username:password@localhost:5432/jesse',
            'trades': 'postgresql://username:password@localhost:5432/jesse_trades',
            'candles': 'postgresql://username:password@localhost:5432/jesse_candles',
            'logs': 'postgresql://username:password@localhost:5432/jesse_logs',
            'metrics': 'postgresql://username:password@localhost:5432/jesse_metrics'
        },
        'mysql': {
            'default': 'mysql://username:password@localhost:3306/jesse',
            'trades': 'mysql://username:password@localhost:3306/jesse_trades',
            'candles': 'mysql://username:password@localhost:3306/jesse_candles',
            'logs': 'mysql://username:password@localhost:3306/jesse_logs',
            'metrics': 'mysql://username:password@localhost:3306/jesse_metrics'
        },
        'mongodb': {
            'default': 'mongodb://localhost:27017/jesse',
            'trades': 'mongodb://localhost:27017/jesse_trades',
            'candles': 'mongodb://localhost:27017/jesse_candles',
            'logs': 'mongodb://localhost:27017/jesse_logs',
            'metrics': 'mongodb://localhost:27017/jesse_metrics'
        },
        'redis': {
            'default': 'redis://localhost:6379/0',
            'trades': 'redis://localhost:6379/1',
            'candles': 'redis://localhost:6379/2',
            'logs': 'redis://localhost:6379/3',
            'metrics': 'redis://localhost:6379/4'
        }
    }
    
    def __init__(self, db_type='sqlite', custom_urls=None):
        self.db_type = db_type
        self.custom_urls = custom_urls or {}
        self.connections = {}
        
    def get_database_url(self, db_name='default'):
        """è·å–æ•°æ®åº“URL"""
        if db_name in self.custom_urls:
            return self.custom_urls[db_name]
        
        if self.db_type in self.DATABASE_URLS:
            return self.DATABASE_URLS[self.db_type].get(db_name, '')
        
        raise ValueError(f"ä¸æ”¯æŒçš„æ•°æ®åº“ç±»å‹: {self.db_type}")
    
    def get_all_urls(self):
        """è·å–æ‰€æœ‰5ä¸ªæ•°æ®åº“çš„URL"""
        return {
            'default': self.get_database_url('default'),
            'trades': self.get_database_url('trades'),
            'candles': self.get_database_url('candles'),
            'logs': self.get_database_url('logs'),
            'metrics': self.get_database_url('metrics')
        }

# ==================== Jesseæ•°æ®åº“ç®¡ç†å™¨ ====================
class JesseDatabaseManager:
    """Jesseæ•°æ®åº“ç®¡ç†å™¨å’Œè¿æ¥æ± """
    
    def __init__(self, config):
        self.config = config
        self.connections = {}
        self.setup_databases()
    
    def setup_databases(self):
        """è®¾ç½®æ‰€æœ‰æ•°æ®åº“è¿æ¥"""
        urls = self.config.get_all_urls()
        
        for db_name, url in urls.items():
            try:
                if url.startswith('sqlite'):
                    self.connections[db_name] = self._connect_sqlite(url)
                elif url.startswith('postgresql'):
                    self.connections[db_name] = self._connect_postgresql(url)
                elif url.startswith('mysql'):
                    self.connections[db_name] = self._connect_mysql(url)
                elif url.startswith('mongodb'):
                    self.connections[db_name] = self._connect_mongodb(url)
                elif url.startswith('redis'):
                    self.connections[db_name] = self._connect_redis(url)
                
                print(f"âœ… {db_name} æ•°æ®åº“è¿æ¥æˆåŠŸ: {url.split('@')[-1]}")
                
            except Exception as e:
                print(f"âŒ {db_name} æ•°æ®åº“è¿æ¥å¤±è´¥: {e}")
    
    def _connect_sqlite(self, url):
        """è¿æ¥SQLiteæ•°æ®åº“"""
        import sqlite3
        from pathlib import Path
        
        # æå–æ•°æ®åº“æ–‡ä»¶è·¯å¾„
        db_path = url.replace('sqlite:///', '')
        Path(db_path).parent.mkdir(parents=True, exist_ok=True)
        
        return sqlite3.connect(db_path, check_same_thread=False)
    
    def _connect_postgresql(self, url):
        """è¿æ¥PostgreSQLæ•°æ®åº“"""
        try:
            import psycopg2
            return psycopg2.connect(url)
        except ImportError:
            raise ImportError("è¯·å®‰è£… psycopg2: pip install psycopg2-binary")
    
    def _connect_mysql(self, url):
        """è¿æ¥MySQLæ•°æ®åº“"""
        try:
            import pymysql
            return pymysql.connect(url)
        except ImportError:
            raise ImportError("è¯·å®‰è£… pymysql: pip install pymysql")
    
    def _connect_mongodb(self, url):
        """è¿æ¥MongoDBæ•°æ®åº“"""
        try:
            from pymongo import MongoClient
            return MongoClient(url)
        except ImportError:
            raise ImportError("è¯·å®‰è£… pymongo: pip install pymongo")
    
    def _connect_redis(self, url):
        """è¿æ¥Redisæ•°æ®åº“"""
        try:
            import redis
            return redis.from_url(url)
        except ImportError:
            raise ImportError("è¯·å®‰è£… redis: pip install redis")

# ==================== Jesseæ•°æ®æ¨¡å‹ ====================
class JesseDataModels:
    """Jesseæ•°æ®æ¨¡å‹å®šä¹‰"""
    
    @staticmethod
    def create_tables_sqlite(connection):
        """åˆ›å»ºSQLiteæ•°æ®è¡¨"""
        cursor = connection.cursor()
        
        # äº¤æ˜“è®°å½•è¡¨
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS trades (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                symbol TEXT NOT NULL,
                side TEXT NOT NULL,
                quantity REAL NOT NULL,
                price REAL NOT NULL,
                timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
                strategy TEXT,
                profit_loss REAL DEFAULT 0,
                fees REAL DEFAULT 0
            )
        ''')
        
        # Kçº¿æ•°æ®è¡¨
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS candles (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                symbol TEXT NOT NULL,
                timeframe TEXT NOT NULL,
                open REAL NOT NULL,
                high REAL NOT NULL,
                low REAL NOT NULL,
                close REAL NOT NULL,
                volume REAL NOT NULL,
                timestamp DATETIME NOT NULL,
                UNIQUE(symbol, timeframe, timestamp)
            )
        ''')
        
        # æ—¥å¿—è¡¨
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS logs (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                level TEXT NOT NULL,
                message TEXT NOT NULL,
                timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
                module TEXT
            )
        ''')
        
        # æŒ‡æ ‡è¡¨
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS metrics (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                metric_name TEXT NOT NULL,
                metric_value REAL NOT NULL,
                timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
                strategy TEXT
            )
        ''')
        
        connection.commit()
    
    @staticmethod
    def create_tables_postgresql(connection):
        """åˆ›å»ºPostgreSQLæ•°æ®è¡¨"""
        # ç±»ä¼¼SQLiteçš„å®ç°ï¼Œä½†ä½¿ç”¨PostgreSQLè¯­æ³•
        pass

# ==================== Jesseæ•°æ®è®¿é—®å±‚ ====================
class JesseDataAccess:
    """Jesseæ•°æ®è®¿é—®å±‚"""
    
    def __init__(self, db_manager):
        self.db = db_manager
    
    def save_trade(self, trade_data):
        """ä¿å­˜äº¤æ˜“è®°å½•"""
        conn = self.db.connections.get('trades')
        if not conn:
            return False
        
        try:
            cursor = conn.cursor()
            cursor.execute('''
                INSERT INTO trades (symbol, side, quantity, price, strategy, profit_loss, fees)
                VALUES (?, ?, ?, ?, ?, ?, ?)
            ''', (
                trade_data['symbol'],
                trade_data['side'],
                trade_data['quantity'],
                trade_data['price'],
                trade_data.get('strategy', ''),
                trade_data.get('profit_loss', 0),
                trade_data.get('fees', 0)
            ))
            conn.commit()
            return True
        except Exception as e:
            print(f"ä¿å­˜äº¤æ˜“è®°å½•å¤±è´¥: {e}")
            return False
    
    def save_candle(self, candle_data):
        """ä¿å­˜Kçº¿æ•°æ®"""
        conn = self.db.connections.get('candles')
        if not conn:
            return False
        
        try:
            cursor = conn.cursor()
            cursor.execute('''
                INSERT OR REPLACE INTO candles 
                (symbol, timeframe, open, high, low, close, volume, timestamp)
                VALUES (?, ?, ?, ?, ?, ?, ?, ?)
            ''', (
                candle_data['symbol'],
                candle_data['timeframe'],
                candle_data['open'],
                candle_data['high'],
                candle_data['low'],
                candle_data['close'],
                candle_data['volume'],
                candle_data['timestamp']
            ))
            conn.commit()
            return True
        except Exception as e:
            print(f"ä¿å­˜Kçº¿æ•°æ®å¤±è´¥: {e}")
            return False
    
    def get_recent_candles(self, symbol, timeframe, limit=100):
        """è·å–æœ€è¿‘çš„Kçº¿æ•°æ®"""
        conn = self.db.connections.get('candles')
        if not conn:
            return []
        
        try:
            cursor = conn.cursor()
            cursor.execute('''
                SELECT * FROM candles 
                WHERE symbol = ? AND timeframe = ?
                ORDER BY timestamp DESC LIMIT ?
            ''', (symbol, timeframe, limit))
            
            return cursor.fetchall()
        except Exception as e:
            print(f"è·å–Kçº¿æ•°æ®å¤±è´¥: {e}")
            return []
    
    def log_message(self, level, message, module=""):
        """è®°å½•æ—¥å¿—"""
        conn = self.db.connections.get('logs')
        if not conn:
            return False
        
        try:
            cursor = conn.cursor()
            cursor.execute('''
                INSERT INTO logs (level, message, module)
                VALUES (?, ?, ?)
            ''', (level, message, module))
            conn.commit()
            return True
        except Exception as e:
            print(f"è®°å½•æ—¥å¿—å¤±è´¥: {e}")
            return False
    
    def save_metric(self, metric_name, metric_value, strategy=""):
        """ä¿å­˜æŒ‡æ ‡æ•°æ®"""
        conn = self.db.connections.get('metrics')
        if not conn:
            return False
        
        try:
            cursor = conn.cursor()
            cursor.execute('''
                INSERT INTO metrics (metric_name, metric_value, strategy)
                VALUES (?, ?, ?)
            ''', (metric_name, metric_value, strategy))
            conn.commit()
            return True
        except Exception as e:
            print(f"ä¿å­˜æŒ‡æ ‡å¤±è´¥: {e}")
            return False

# ==================== é‡å­äº¤æ˜“å¼•æ“ä¸Jesseæ•´åˆ ====================
class QuantumJesseIntegration:
    """é‡å­äº¤æ˜“å¼•æ“ä¸Jesseæ¡†æ¶çš„æ•´åˆ"""
    
    def __init__(self, jesse_config=None, quantum_engine=None):
        self.jesse_config = jesse_config or JesseDatabaseConfig()
        self.db_manager = JesseDatabaseManager(self.jesse_config)
        self.data_access = JesseDataAccess(self.db_manager)
        self.quantum_engine = quantum_engine or QuantumGenesisHyperEngine()
        
        # åˆå§‹åŒ–æ•°æ®åº“è¡¨
        self._initialize_database()
    
    def _initialize_database(self):
        """åˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„"""
        for db_name, conn in self.db_manager.connections.items():
            if db_name == 'trades':
                JesseDataModels.create_tables_sqlite(conn)
    
    def run_quantum_strategy(self, symbol, timeframe):
        """è¿è¡Œé‡å­ç­–ç•¥å¹¶ä¸Jesseé›†æˆ"""
        try:
            # 1. ä»Jesseæ•°æ®åº“è·å–å¸‚åœºæ•°æ®
            market_data = self.get_market_data_from_jesse(symbol, timeframe)
            
            # 2. ä½¿ç”¨é‡å­å¼•æ“å¤„ç†æ•°æ®
            quantum_signal = self.quantum_engine.process_market_data(market_data)
            
            # 3. æ‰§è¡Œäº¤æ˜“å†³ç­–
            if quantum_signal.get('action') != 'hold':
                trade_result = self.execute_trade(symbol, quantum_signal)
                
                # 4. ä¿å­˜äº¤æ˜“è®°å½•åˆ°Jesseæ•°æ®åº“
                self.data_access.save_trade({
                    'symbol': symbol,
                    'side': trade_result['side'],
                    'quantity': trade_result['quantity'],
                    'price': trade_result['price'],
                    'strategy': 'quantum_enhanced',
                    'profit_loss': trade_result.get('profit_loss', 0)
                })
                
                # 5. è®°å½•æŒ‡æ ‡
                self.data_access.save_metric('quantum_signal_strength', 
                                           quantum_signal.get('confidence', 0),
                                           'quantum_strategy')
            
            # 6. è®°å½•æ—¥å¿—
            self.data_access.log_message('INFO', 
                                      f'é‡å­ç­–ç•¥æ‰§è¡Œ: {symbol} {timeframe}',
                                      'QuantumJesseIntegration')
            
            return quantum_signal
            
        except Exception as e:
            self.data_access.log_message('ERROR', f'é‡å­ç­–ç•¥æ‰§è¡Œå¤±è´¥: {str(e)}')
            return {'action': 'hold', 'error': str(e)}
    
    def get_market_data_from_jesse(self, symbol, timeframe, limit=100):
        """ä»Jesseæ•°æ®åº“è·å–å¸‚åœºæ•°æ®"""
        candles = self.data_access.get_recent_candles(symbol, timeframe, limit)
        
        if not candles:
            return self._get_fallback_data(symbol)
        
        # è½¬æ¢ä¸ºpandas DataFrameæ ¼å¼
        import pandas as pd
        df = pd.DataFrame(candles, columns=['id', 'symbol', 'timeframe', 'open', 
                                          'high', 'low', 'close', 'volume', 'timestamp'])
        df['timestamp'] = pd.to_datetime(df['timestamp'])
        df.set_index('timestamp', inplace=True)
        
        return df
    
    def _get_fallback_data(self, symbol):
        """å¤‡é€‰æ•°æ®è·å–æ–¹æ³•"""
        # å¦‚æœJesseæ•°æ®åº“æ²¡æœ‰æ•°æ®ï¼Œä»å…¶ä»–æ¥æºè·å–
        print(f"Jesseæ•°æ®åº“ä¸­æ²¡æœ‰{symbol}çš„æ•°æ®ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®")
        return self._generate_sample_data()
    
    def execute_trade(self, symbol, signal):
        """æ‰§è¡Œäº¤æ˜“ï¼ˆæ¨¡æ‹Ÿå®ç°ï¼‰"""
        # è¿™é‡Œåº”è¯¥è¿æ¥åˆ°å®é™…çš„äº¤æ˜“æ‰€API
        # ç›®å‰ä½¿ç”¨æ¨¡æ‹Ÿæ‰§è¡Œ
        
        return {
            'symbol': symbol,
            'side': signal['action'],
            'quantity': 0.01,  # å›ºå®šæ•°é‡
            'price': self._get_current_price(symbol),
            'timestamp': pd.Timestamp.now(),
            'status': 'executed'
        }
    
    def _get_current_price(self, symbol):
        """è·å–å½“å‰ä»·æ ¼ï¼ˆæ¨¡æ‹Ÿå®ç°ï¼‰"""
        # è¿™é‡Œåº”è¯¥ä»äº¤æ˜“æ‰€APIè·å–å®æ—¶ä»·æ ¼
        return 50000.0  # æ¨¡æ‹ŸBTCä»·æ ¼
    
    def _generate_sample_data(self):
        """ç”Ÿæˆæ ·æœ¬æ•°æ®"""
        import pandas as pd
        dates = pd.date_range('2023-01-01', periods=100, freq='1H')
        prices = 50000 + np.cumsum(np.random.randn(100) * 100)
        
        return pd.DataFrame({
            'close': prices,
            'open': prices - np.random.rand(100) * 50,
            'high': prices + np.random.rand(100) * 50,
            'low': prices - np.random.rand(100) * 50,
            'volume': np.random.randint(1000, 10000, 100)
        }, index=dates)

# ==================== è‡ªåŠ¨åŒ–Jesseé…ç½®ç”Ÿæˆ ====================
class JesseConfigGenerator:
    """Jesseé…ç½®è‡ªåŠ¨ç”Ÿæˆå™¨"""
    
    @staticmethod
    def generate_config_file(db_type='sqlite', custom_settings=None):
        """ç”ŸæˆJesseé…ç½®æ–‡ä»¶"""
        
        config_template = """
# Jesseé…ç½®æ–‡ä»¶ - è‡ªåŠ¨ç”Ÿæˆ
# ç”Ÿæˆæ—¶é—´: {timestamp}

import os
from jesse import utils

# æ•°æ®åº“é…ç½®
config = {{
    'databases': {{
        'default': '{default_url}',
        'trades': '{trades_url}', 
        'candles': '{candles_url}',
        'logs': '{logs_url}',
        'metrics': '{metrics_url}'
    }},
    
    # äº¤æ˜“æ‰€é…ç½®
    'exchanges': {{
        'Binance': {{
            'api_key': os.getenv('BINANCE_API_KEY', ''),
            'api_secret': os.getenv('BINANCE_API_SECRET', ''),
            'sandbox': False
        }},
        'OKX': {{
            'api_key': os.getenv('OKX_API_KEY', ''),
            'api_secret': os.getenv('OKX_API_SECRET', ''),
            'password': os.getenv('OKX_PASSWORD', ''),
            'sandbox': False
        }}
    }},
    
    # äº¤æ˜“å¯¹é…ç½®
    'symbols': ['BTC-USDT', 'ETH-USDT', 'BNB-USDT'],
    
    # æ—¶é—´æ¡†æ¶é…ç½®
    'timeframes': ['1m', '5m', '15m', '1h', '4h', '1d'],
    
    # ç­–ç•¥é…ç½®
    'strategies': {{
        'quantum_enhanced': {{
            'class': 'strategies.QuantumEnhancedStrategy',
            'config': {{
                'qubits': 7,
                'quantum_backend': 'qasm_simulator',
                'risk_per_trade': 0.02,
                'max_leverage': 3
            }}
        }}
    }},
    
    # è·¯ç”±é…ç½®
    'routes': [
        # ç¤ºä¾‹è·¯ç”±
        {{
            'exchange': 'Binance',
            'symbol': 'BTC-USDT',
            'timeframe': '5m',
            'strategy': 'quantum_enhanced',
            'config': {{
                'risk_per_trade': 0.01
            }}
        }}
    ],
    
    # é¢å¤–é…ç½®
    'extra': {custom_settings}
}}

# ç¯å¢ƒå˜é‡é…ç½®
env_config = {{
    'DATA_DIR': './data',
    'LOGS_DIR': './logs',
    'STORAGE_DIR': './storage'
}}

def get_config():
    return config

def get_env_config():
    return env_config
        """
        
        db_config = JesseDatabaseConfig(db_type)
        urls = db_config.get_all_urls()
        
        custom_settings = custom_settings or {
            'quantum_integration': True,
            'auto_optimize': True,
            'real_time_monitoring': True
        }
        
        from datetime import datetime
        return config_template.format(
            timestamp=datetime.now().isoformat(),
            default_url=urls['default'],
            trades_url=urls['trades'],
            candles_url=urls['candles'],
            logs_url=urls['logs'],
            metrics_url=urls['metrics'],
            custom_settings=custom_settings
        )

# ==================== ä½¿ç”¨ç¤ºä¾‹å’Œæµ‹è¯• ====================
def demonstrate_jesse_integration():
    """æ¼”ç¤ºJesseé›†æˆåŠŸèƒ½"""
    
    print("=== Jesseé‡å­äº¤æ˜“é›†æˆæ¼”ç¤º ===")
    
    # 1. åˆ›å»ºJesseæ•°æ®åº“é…ç½®
    jesse_config = JesseDatabaseConfig('sqlite')
    urls = jesse_config.get_all_urls()
    
    print("ğŸ“Š Jesseæ•°æ®åº“URLé…ç½®:")
    for db_name, url in urls.items():
        print(f"  {db_name}: {url}")
    
    # 2. ç”Ÿæˆé…ç½®æ–‡ä»¶
    config_content = JesseConfigGenerator.generate_config_file()
    print("\nğŸ“ ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ç¤ºä¾‹:")
    print(config_content[:500] + "...")  # åªæ˜¾ç¤ºå‰500å­—ç¬¦
    
    # 3. åˆ›å»ºé›†æˆå®ä¾‹
    quantum_engine = QuantumGenesisHyperEngine()
    integration = QuantumJesseIntegration(jesse_config, quantum_engine)
    
    # 4. æµ‹è¯•é‡å­ç­–ç•¥æ‰§è¡Œ
    print("\nğŸš€ æµ‹è¯•é‡å­ç­–ç•¥æ‰§è¡Œ...")
    result = integration.run_quantum_strategy('BTC-USDT', '5m')
    print(f"ç­–ç•¥ç»“æœ: {result}")
    
    return integration

# ==================== å¿«é€Ÿå¯åŠ¨æ¨¡æ¿ ====================
def create_quantum_jesse_project(project_name="quantum_jesse_trader"):
    """åˆ›å»ºå®Œæ•´çš„é‡å­Jesseäº¤æ˜“é¡¹ç›®"""
    
    import os
    import shutil
    
    project_dir = f"./{project_name}"
    
    # åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„
    dirs = [
        project_dir,
        f"{project_dir}/strategies",
        f"{project_dir}/config",
        f"{project_dir}/data",
        f"{project_dir}/logs",
        f"{project_dir}/tests"
    ]
    
    for dir_path in dirs:
        os.makedirs(dir_path, exist_ok=True)
    
    # ç”Ÿæˆé…ç½®æ–‡ä»¶
    config_content = JesseConfigGenerator.generate_config_file()
    with open(f"{project_dir}/config/jesse_config.py", "w") as f:
        f.write(config_content)
    
    # ç”Ÿæˆä¸»ç¨‹åºæ–‡ä»¶
    main_content = """
#!/usr/bin/env python3
# é‡å­Jesseäº¤æ˜“ç³»ç»Ÿä¸»ç¨‹åº

from quantum_jesse_integration import QuantumJesseIntegration
from jesse_config import get_config

def main():
    \"\"\"ä¸»äº¤æ˜“å¾ªç¯\"\"\"
    print("å¯åŠ¨é‡å­Jesseäº¤æ˜“ç³»ç»Ÿ...")
    
    # åˆ›å»ºé›†æˆå®ä¾‹
    integration = QuantumJesseIntegration()
    
    # ä¸»äº¤æ˜“å¾ªç¯
    try:
        while True:
            # è¿è¡Œé‡å­ç­–ç•¥
            result = integration.run_quantum_strategy('BTC-USDT', '5m')
            print(f"ç­–ç•¥æ‰§è¡Œç»“æœ: {result}")
            
            # ç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸ
            import time
            time.sleep(300)  # 5åˆ†é’Ÿ
            
    except KeyboardInterrupt:
        print("ç³»ç»Ÿæ­£å¸¸é€€å‡º")
    except Exception as e:
        print(f"ç³»ç»Ÿå¼‚å¸¸: {e}")

if __name__ == "__main__":
    main()
    """
    
    with open(f"{project_dir}/main.py", "w") as f:
        f.write(main_content)
    
    # ç”Ÿæˆrequirements.txt
    requirements = """
jesse==0.30.0
qiskit>=0.40.0
numpy>=1.21.0
pandas>=1.3.0
ccxt>=3.0.0
sqlite3
psycopg2-binary  # å¦‚æœä½¿ç”¨PostgreSQL
pymysql          # å¦‚æœä½¿ç”¨MySQL
pymongo          # å¦‚æœä½¿ç”¨MongoDB
redis            # å¦‚æœä½¿ç”¨Redis
    """
    
    with open(f"{project_dir}/requirements.txt", "w") as f:
        f.write(requirements)
    
    print(f"âœ… é‡å­Jesseäº¤æ˜“é¡¹ç›®å·²åˆ›å»º: {project_dir}")
    print("ğŸ“ é¡¹ç›®ç»“æ„:")
    for root, dirs, files in os.walk(project_dir):
        level = root.replace(project_dir, '').count(os.sep)
        indent = ' ' * 2 * level
        print(f"{indent}{os.path.basename(root)}/")
        subindent = ' ' * 2 * (level + 1)
        for file in files:
            print(f"{subindent}{file}")
    
    return project_dir

if __name__ == "__main__":
    # æ¼”ç¤ºJesseé›†æˆ
    integration = demonstrate_jesse_integration()
    
    # åˆ›å»ºå®Œæ•´é¡¹ç›®
    project_dir = create_quantum_jesse_project()
    
    print(f"\nğŸ‰ é›†æˆå®Œæˆï¼")
    print("ä¸‹ä¸€æ­¥:")
    print("1. cd quantum_jesse_trader")
    print("2. pip install -r requirements.txt") 
